<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept PUBLIC "urn:pubid:zenoss.com:doctypes:dita:dtd:concept" "concept.dtd">
<concept id="conceptid">
  <title>Emergency shutdown of services</title>
  <shortdesc>When <ph keyref="nm-cc"/> predicts that a service is about to exhaust storage space, it
    initiates an automatic emergency shutdown of the service. The shutdown occurs while enough space
    is available on the DFS to perform recovery operations and minimize the risk of data corruption. </shortdesc>
  <conbody><!-- inserting a useless comment for testing purposes only -->
    <p><ph keyref="nm-cc"/> monitors the short-term DFS usage trends and current usage levels by
      services and displays the information in the DFS Usage graph.  By comparing usage to the
      available storage and the amount of space that must be reserved, <ph keyref="nm-cc"/>
      determines when a service must be shut down before filling the thin pool or DFS, and initiates
      the emergency shutdown. </p>
    <p>To minimize data loss,  <ph keyref="nm-cc"/> shuts down services in the following order:
      databases (because they write data); services that cannot be recovered; indices and services
      that are difficult to recover; any other services. Services in emergency shutdown status
      cannot be restarted until the underlying cause of the shutdown is resolved.</p>
    <p>To resolve an emergency shutdown:<ol id="ol_ejz_rxx_yy">
        <li>Examine the service that was shut down to determine why it was using excessive storage
          and correct the issue. For example,<ul id="ul_avm_gyx_yy">
            <li>If an application was writing a large amount of performance data to the tenant
              device, add space to the device.</li>
            <li>If too many snapshots are stored on the device, delete those that you no longer
              need.</li>
            <li>If a usage anomaly might have occurred, wait for usage levels to return to
              normal.</li>
          </ul>
        </li>
        <li>Clear the emergency shutdown flags by issuing the <cmdname>serviced service
            clear-emergency</cmdname> command.</li>
        <li>Restart the service by using the browser interface or by issuing the <cmdname>serviced
            service restart</cmdname> command.</li>
      </ol></p>
  </conbody>
  <related-links>
    <link keyref="cc-feature-manage-resize"/>
    <link keyref="cc-feature-manage-snapshot-rollback"/>
    <link keyref="cc-feature-cli-serviced-service"/>
  </related-links>
</concept>
